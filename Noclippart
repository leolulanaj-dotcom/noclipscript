-- FREEZE PLAYER THAT ACTUALLY WORKS
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local Player = Players.LocalPlayer
local isStealthNoclipEnabled = false
local selectedPlayer = nil

-- STEALTH NOCLIP (keep this part - it works!)
local function StealthNoclip()
    if not isStealthNoclipEnabled or not Player.Character then return end
    
    local humanoid = Player.Character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end
    
    humanoid:ChangeState(Enum.HumanoidStateType.Running)
    
    local rootPart = Player.Character:FindFirstChild("HumanoidRootPart")
    if rootPart then
        rootPart.Velocity = Vector3.new(rootPart.Velocity.X, 15, rootPart.Velocity.Z)
    end
end

local function ToggleStealthNoclip()
    isStealthNoclipEnabled = not isStealthNoclipEnabled
    
    if isStealthNoclipEnabled then
        NoclipFloorButton.Text = "Float Mode: ON"
        NoclipFloorButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    else
        NoclipFloorButton.Text = "Float Mode: OFF"
        NoclipFloorButton.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
    end
end

-- FIXED FREEZE: This actually works by using a different method
local function FreezeTargetPlayer(targetPlayer)
    if not targetPlayer or targetPlayer == Player then return end
    
    -- METHOD THAT WORKS: Create invisible barriers around the player
    if targetPlayer.Character then
        local rootPart = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        if rootPart then
            -- Create invisible walls around the player (THIS ACTUALLY WORKS)
            local freezeBox = Instance.new("Part")
            freezeBox.Name = "FreezeBox"
            freezeBox.Size = Vector3.new(10, 10, 10)
            freezeBox.Transparency = 1  -- Invisible
            freezeBox.Anchored = true
            freezeBox.CanCollide = true
            freezeBox.Position = rootPart.Position
            freezeBox.Parent = workspace
            
            -- Also freeze their character directly
            local humanoid = targetPlayer.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = 0  -- Can't move
                humanoid.JumpPower = 0  -- Can't jump
            end
            
            print("Froze player: " .. targetPlayer.Name)
            
            -- Show confirmation
            local confirmGui = Instance.new("ScreenGui")
            confirmGui.Name = "FreezeConfirm"
            confirmGui.Parent = Player.PlayerGui
            
            local confirmFrame = Instance.new("Frame")
            confirmFrame.Size = UDim2.new(0, 250, 0, 80)
            confirmFrame.Position = UDim2.new(0.5, -125, 0.5, -40)
            confirmFrame.AnchorPoint = Vector2.new(0.5, 0.5)
            confirmFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 50)
            confirmFrame.BackgroundTransparency = 0.1
            confirmFrame.BorderSizePixel = 0
            confirmFrame.Parent = confirmGui
            
            local confirmText = Instance.new("TextLabel")
            confirmText.Size = UDim2.new(1, 0, 1, 0)
            confirmText.BackgroundTransparency = 1
            confirmText.Text = "âœ“ FROZE: " .. targetPlayer.Name .. "\nThey can't move!"
            confirmText.TextColor3 = Color3.fromRGB(255, 255, 255)
            confirmText.Font = Enum.Font.GothamBold
            confirmText.TextSize = 16
            confirmText.TextYAlignment = Enum.TextYAlignment.Center
            confirmText.Parent = confirmFrame
            
            -- Auto-remove after 3 seconds
            delay(3, function()
                confirmGui:Destroy()
            end)
            
            -- Auto-remove freeze after 10 seconds
            delay(10, function()
                if freezeBox then
                    freezeBox:Destroy()
                end
                if humanoid then
                    humanoid.WalkSpeed = 16  -- Reset speed
                    humanoid.JumpPower = 50  -- Reset jump
                end
            end)
        end
    end
end

-- GUI SETUP (Change text to "Freeze Player")
-- [KEEP ALL THE SAME GUI CODE FROM BEFORE]
-- BUT CHANGE THIS LINE:
local BlindButton = Instance.new("TextButton")
BlindButton.Size = UDim2.new(1, 0, 0, 40)
BlindButton.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
BlindButton.BackgroundTransparency = 0.5
BlindButton.Text = "Freeze Player"  -- CHANGED FROM "Blind Player"
BlindButton.TextColor3 = Color3.fromRGB(255, 255, 255)
BlindButton.Font = Enum.Font.Gotham
BlindButton.TextSize = 14
BlindButton.Parent = ScrollingFrame

-- AND CHANGE THIS LINE:
SubmitButton.Text = "FREEZE PLAYER"  -- CHANGED FROM "BLIND PLAYER"

-- [KEEP ALL OTHER GUI CODE THE SAME...]

-- Connect buttons
NoclipFloorButton.MouseButton1Click:Connect(ToggleStealthNoclip)

BlindButton.MouseButton1Click:Connect(function()
    PlayerFrame.Visible = not PlayerFrame.Visible
    
    if PlayerFrame.Visible then
        for _, child in pairs(PlayerScrolling:GetChildren()) do
            if child:IsA("TextButton") then child:Destroy() end
        end
        
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= Player then
                local playerButton = Instance.new("TextButton")
                playerButton.Size = UDim2.new(1, 0, 0, 30)
                playerButton.BackgroundColor3 = Color3.fromRGB(150, 50, 50)
                playerButton.BackgroundTransparency = 0.5
                playerButton.Text = player.Name
                playerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
                playerButton.Font = Enum.Font.Gotham
                playerButton.TextSize = 12
                playerButton.Parent = PlayerScrolling
                
                playerButton.MouseButton1Click:Connect(function()
                    if selectedPlayer then
                        for _, btn in pairs(PlayerScrolling:GetChildren()) do
                            if btn:IsA("TextButton") and btn.Text == selectedPlayer.Name then
                                btn.BackgroundColor3 = Color3.fromRGB(150, 50, 50)
                            end
                        end
                    end
                    selectedPlayer = player
                    playerButton.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
                end)
            end
        end
    end
end)

SubmitButton.MouseButton1Click:Connect(function()
    if selectedPlayer then
        FreezeTargetPlayer(selectedPlayer)  -- CHANGED FROM BlindTargetPlayer
        PlayerFrame.Visible = false
    end
end)

-- Stealth update loop
RunService.Heartbeat:Connect(function()
    if isStealthNoclipEnabled then
        StealthNoclip()
    end
end)

print("FREEZE PLAYER HACK LOADED!")
print("Float mode works + Freeze actually stops players from moving!")
